# DFD

<img src="https://user-images.githubusercontent.com/115949608/205011561-41231333-a84e-4fcf-a7b3-534d51c52689.PNG" width="450px" height="300px" title="px(픽셀) 크기 설정" alt="RubberDuck"></img><br/>
![dfd이미지](https://user-images.githubusercontent.com/115949608/205011561-41231333-a84e-4fcf-a7b3-534d51c52689.PNG)



사용자가 구글에 접속하면 Geolocation API와 Places API는 구글 지도를 이용하여 현재 위치의 좌표값을 가져옵니다. 
가져온 죄표값을 Geolocation API과 Places API에게 주면 현재위치와 주변 장소의 키워드를 얻을수 있고, 출력받은 키워드를 키워드 데이터 베이스에 전달합니다.

사용자가 구글에 접속 되었을 때 구글에서 사용자 검색어 기록 데이터 베이스, 사용자 이미지 검색어 기록 데이터 베이스, 지도의 최근 3개월 검색어 기록 데이터 베이스를 가져옵니다.
가져온 구글 검색어 기록 데이터 베이스는 NLTK 오픈소스를 통해 키워드로 추출되어 키워드 데이터 베이스에 전달 됩니다.

사용자 이미지 검색어 기록 데이터 베이스는 KOCLIP 오픈소스에 전달되고 이미지와 일치하는 키워드로 추출되어 키워드 데이터 베이스에 전달됩니다.

지도의 검색어 기록 데이터 베이스의 데이터를 NLTK 오픈소스로 전달하고 키워드를 추출하여 키워드 데이터 베이스에 전달합니다.
만약 사용자가 구글에서 가져올 검색어 기록이 전혀 없는 초기 사용자이더라도 구글지도를 통해 위치정보를 가져오기 때문에 사용자 맞춤 광고를 제공할 수 있습니다.

PCC는 광고 데이터 베이스에서 광고 데이터를 받아 카테고리로 분류합니다. 분류된 카테고리는 BERT로 전달되어 학습됩니다.

주변 장소 키워드, 검색어 기록에서 추출된 키워드, 이미지 검색어 기록에서 추출된 키워드, 지도의 검색어 기록에서 추출된 키워드들이 있는 키워드 데이터베이스의 데이터는 BERT로 전달되어 미리 학습된 광고 카테고리로 나누어집니다.

BERT는 카테고리로 나누어진 키워드 백터를 TensorFlow로 전달합니다. TensorFlow는 TensorFlow Ranking을 이용하여 우선순위 목록을 만듭니다. 
tensor형태인 우선순위 목록은 TFX를 통하여 json형태로 광고 판매 플랫폼에 우선순위 목록을 전달합니다. 그렇게 우선순위 목록을 받은 광고 판매 플랫폼은 우선순위 목록에 맞춰 사용자에게 광고를 띄웁니다. 
이러한 방식으로 사용자 맞춤 광고를 제공합니다.
